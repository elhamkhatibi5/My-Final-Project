<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ðŸŽ“ Pocket Classroom â€” Mini E-Learning Platform</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
:root{
  --bg:#0f1720; --card:#0b1220; --muted:#9aa4b2; --accent:#0ea5a4;
}
body{
  background:var(--bg); color:#e6eef6; font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
}
.app-shell{
  min-height:100vh; display:grid; grid-template-columns: 1fr 360px; gap:20px; padding:20px;
}
.main-col{display:flex; flex-direction:column; gap:18px;}
header.navbar{
  background:linear-gradient(90deg,#083042,#0b2540); border-radius:12px; padding:12px 18px;
}
.brand{font-weight:700; font-size:1.15rem;}
.card-panel{
  background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.06));
  border-radius:12px; padding:16px; border:1px solid rgba(255,255,255,0.03);
}
.library-grid{display:grid; grid-template-columns:repeat(auto-fill,minmax(240px,1fr)); gap:12px;}
.capsule-card{
  background:var(--card); border-radius:10px; padding:12px; border:1px solid rgba(255,255,255,0.03);
}
.muted{color:var(--muted); font-size:0.9rem;}
.tag{
  background:rgba(255,255,255,0.04); color:var(--muted); border-radius:999px; padding:4px 8px;
  font-size:0.75rem; margin-right:6px;
}
.btn-pill{border-radius:999px;}
.small-input{height:36px;}
.notes-panel{
  background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.04));
  border-radius:12px; padding:12px; height:calc(100vh - 160px); overflow:auto;
}
textarea#notes{
  width:100%; min-height:320px; resize:vertical; background:transparent; color:inherit;
  border:1px dashed rgba(255,255,255,0.04); padding:12px; border-radius:8px;
}
.flashcard-item{
  background:rgba(255,255,255,0.02); padding:8px; border-radius:8px; margin-bottom:8px;
}
.learn-card{min-height:180px;}
footer{opacity:0.6; font-size:0.85rem;}
.kbd{
  background:rgba(255,255,255,0.03); padding:4px 8px; border-radius:6px; font-size:0.9rem;
}
@media (max-width: 900px){
  .app-shell{grid-template-columns: 1fr; padding:12px;}
  .notes-panel{height:280px;}
}
</style>
</head>
<body>
<div class="container-fluid">
  <div class="app-shell">

    <!-- MAIN COLUMN -->
    <div class="main-col">

      <!-- Header / Nav -->
      <header class="navbar card-panel d-flex align-items-center justify-content-between">
        <div class="d-flex gap-3 align-items-center">
          <div class="brand">ðŸŽ“ Pocket Classroom</div>
          <nav>
            <button class="btn btn-sm btn-outline-light btn-pill nav-btn active" data-section="library">Library</button>
            <button class="btn btn-sm btn-outline-light btn-pill nav-btn" data-section="author">Create</button>
            <button class="btn btn-sm btn-outline-light btn-pill nav-btn" data-section="learn">Study</button>
          </nav>
        </div>
        <div class="d-flex gap-2 align-items-center">
          <input id="global-search" class="form-control form-control-sm small-input" placeholder="Search capsules, tags..." />
          <select id="sort-select" class="form-select form-select-sm small-input" style="width:170px;">
            <option value="date-desc">Newest first</option>
            <option value="date-asc">Oldest first</option>
            <option value="title-asc">Title Aâ†’Z</option>
            <option value="title-desc">Title Zâ†’A</option>
          </select>
          <button id="export-all" class="btn btn-sm btn-success btn-pill">Export</button>
          <button id="import-all" class="btn btn-sm btn-secondary btn-pill">Import</button>
          <input id="file-import" type="file" accept=".json" style="display:none">
        </div>
      </header>

      <!-- Library Section -->
      <section id="library" class="card-panel">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <h4 class="mb-0">Your Library</h4>
          <div class="muted">Capsules: <span id="capsule-count">0</span></div>
        </div>
        <div id="library-list" class="library-grid"></div>
        <div id="empty-state" class="text-center muted mt-4">
          No capsules yet. Click <span class="kbd">Create</span> to add your first learning capsule.
        </div>
      </section>

      <!-- Author Section -->
      <section id="author" class="card-panel d-none">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <h4 class="mb-0">Create / Edit Capsule</h4>
          <div class="muted">Type: <span id="capsule-type-label">Note</span></div>
        </div>
        <form id="capsule-form">
          <input type="hidden" id="editing-index" value="">
          <div class="mb-2">
            <label class="muted">Title</label>
            <input id="capsule-title" class="form-control" placeholder="e.g., Intro to Photosynthesis" required>
          </div>
          <div class="mb-2 d-flex gap-2">
            <div style="flex:1">
              <label class="muted">Tags (comma separated)</label>
              <input id="capsule-tags" class="form-control" placeholder="e.g., Biology, Plant">
            </div>
            <div style="width:200px">
              <label class="muted">Capsule type</label>
              <select id="capsule-type" class="form-select">
                <option value="note">Note</option>
                <option value="flashcards">Flashcards</option>
                <option value="quiz">Quiz (multiple choice)</option>
              </select>
            </div>
          </div>

          <div id="note-content-wrapper" class="mb-2">
            <label class="muted">Content (for Notes)</label>
            <textarea id="capsule-content" class="form-control" rows="4" placeholder="Write summary, lecture notes, or instructions..."></textarea>
          </div>

          <div id="flashcards-wrapper" class="mb-2 d-none">
            <label class="muted">Flashcards</label>
            <div id="flashcards-list" class="mb-2"></div>
            <div class="d-flex gap-2">
              <input id="fc-front" class="form-control" placeholder="Front (question/term)">
              <input id="fc-back" class="form-control" placeholder="Back (answer/definition)">
              <button id="add-fc" type="button" class="btn btn-primary btn-pill">Add</button>
            </div>
          </div>

          <div id="quiz-wrapper" class="mb-2 d-none">
            <label class="muted">Quiz Questions</label>
            <div id="quiz-list" class="mb-2"></div>
            <div class="d-flex gap-2">
              <input id="q-text" class="form-control" placeholder="Question text">
              <input id="q-opt1" class="form-control" placeholder="Option A">
              <input id="q-opt2" class="form-control" placeholder="Option B">
            </div>
            <div class="d-flex gap-2 mt-2">
              <input id="q-opt3" class="form-control" placeholder="Option C (optional)">
              <input id="q-opt4" class="form-control" placeholder="Option D (optional)">
              <select id="q-correct" class="form-select" style="width:120px;">
                <option value="1">A</option>
                <option value="2">B</option>
                <option value="3">C</option>
                <option value="4">D</option>
              </select>
              <button id="add-q" type="button" class="btn btn-primary btn-pill">Add Q</button>
            </div>
          </div>

          <div class="d-flex gap-2 mt-3">
            <button class="btn btn-success btn-pill" type="submit">Save Capsule</button>
            <button id="cancel-edit" type="button" class="btn btn-outline-light btn-pill">Cancel</button>
            <button id="new-capsule" type="button" class="btn btn-secondary btn-pill ms-auto">New Capsule</button>
          </div>
        </form>
      </section>

      <!-- Learn Section -->
      <section id="learn" class="card-panel d-none">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <h4 class="mb-0">Study</h4>
          <div class="muted">Mode: <span id="study-mode">Flashcards</span></div>
        </div>

        <div id="study-controls" class="mb-3 d-flex gap-2 align-items-center">
          <select id="study-capsule-select" class="form-select" style="width:300px;">
            <option value="">Choose a capsule to study...</option>
          </select>
          <button id="start-study" class="btn btn-primary btn-pill">Start</button>
          <button id="shuffle-study" class="btn btn-outline-light btn-pill">Shuffle</button>
          <div class="muted ms-auto">Progress: <span id="study-progress">0 / 0</span></div>
        </div>

        <div id="study-area" class="learn-card card-panel">
          <div id="study-empty" class="muted">
            Select a capsule and press Start to begin studying flashcards or quizzes.
          </div>

          <div id="flashcard-study" class="d-none">
            <div class="mb-2 muted small" id="fc-meta"></div>
            <div id="fc-front-display" class="h5 fw-bold mb-2"></div>
            <div id="fc-back-display" class="muted mb-3" style="display:none"></div>
            <div class="d-flex gap-2">
              <button
